{"version":3,"sources":["reportWebVitals.js","components/token.jsx","components/sweep.jsx","components/main.jsx","App.js","index.js","helpers/constants.js","helpers/helpers.js","helpers/ABI.js"],"names":["reportWebVitals","onPerfEntry","Function","then","getCLS","getFID","getFCP","getLCP","getTTFB","token","props","state","swapButton","l2MigrationButton","balanceObj","this","helpers","transferToken","console","log","catch","error","undefined","zksyncSupportedTokens","filter","address","button","className","onClick","migrateToZksync","setState","getQuoteInEth1Inch","quote","tradeToEthWith1Inch","setL2MigrationButton","set1InchButton","name","balance","decimals","type","formattedBalance","formatFixed","toString","Math","max","parseInt","length","substring","setTransferClick","e","Component","sweep","account","to","provider","tokens","balancesMapping","map","id","sendAllEth","migrateEthtoL2","sendAllTokens","main","setReadyClick","bind","load","window","ethereum","enable","accounts","ethers","providers","Web3Provider","web3","currentProvider","getBalance","chainId","getTokenBalances","document","getElementById","hidden","value","utils","isAddress","alert","sweepElement","href","placeholder","App","ReactDOM","render","StrictMode","module","exports","require","unlimitedAllowance","zksyncAddress","OneInchAPIURL","ethAddress","ZKSYNC","ERC20","ERC721","request","APIKeyString","userBalanceEth","getGasPrice","gasPrice","txObj","estimateGas","gasLimit","totalCost","BigNumber","from","mul","sub","getSigner","sendTransaction","Contract","connect","transfer","contract","get1InchTradeData","tx","approvalAddress","tokenContract","approve","query","get","response","body","DEXAddress","message","JSON","parse","text","includes","result","toTokenAmount","zksyncContract","depositETH","allowance","_hex","depositERC20","amount","getERC20Tokens","erc20TokensObj","getERC721Tokens","erc721TokensObj","getAllERC20Balances","erc20Balances","getAllERC721Balances","erc721Balances","a","seen","item","hasOwnProperty","tokensObj","contracts","uniq","contractAddresses","names","tokenNames","index","tokenIds","tokenId","getStillOwnedERC721","push","erc20Contracts","contractAddress","getERC20Balance","ownerOf","owner","toLowerCase","balanceOf","erc20Query","getQueryERC20Events","tokenDecimals","call","results","tokenName","tokenDecimal","erc721Query","getQueryERC721Events","tokenID"],"mappings":"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","file":"static/js/main.7886de61.chunk.js","sourcesContent":["const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React, { Component } from 'react';\nimport { formatFixed } from '@ethersproject/bignumber';\nimport { zksyncSupportedTokens } from '../helpers/constants';\n\nclass token extends Component {\n\n    state = {\n        swapButton: \"\",\n        l2MigrationButton: \"\"\n    }\n\n    constructor(props) {\n        super(props);\n        this.props = props;\n    }\n\n    setTransferClick(balanceObj) {\n        this.props.helpers.transferToken(balanceObj)\n            .then(console.log)\n            .catch(console.error);\n    }\n\n    setL2MigrationButton() {\n        //TODO do includes or something more logical here\n        const { balanceObj } = this.props;\n        const zksyncSupportedToken = zksyncSupportedTokens.filter((token) => {\n            return token.address === balanceObj.address;\n        })[0];\n        if(zksyncSupportedToken !== undefined) {\n            const button = (<button className=\"btn btn-danger\" onClick={ () => { this.props.helpers.migrateToZksync(balanceObj).then(console.log).catch(console.error) } }> Migrate to L2</button>)\n            this.setState({ l2MigrationButton: button });\n        }\n    }\n\n    async set1InchButton() {\n        const { balanceObj } = this.props;\n        const quote = await this.props.helpers.getQuoteInEth1Inch(balanceObj);\n        if(!!quote) {\n            const button = (<button className=\"btn btn-success\" onClick={ () => { this.props.helpers.tradeToEthWith1Inch(balanceObj).then(console.log).catch(console.error) } }>Swap for {quote} ETH</button>);\n            this.setState({ swapButton: button })\n        }\n    }\n\n    componentDidMount() {\n        this.setL2MigrationButton()\n        return this.set1InchButton();\n    }\n\n    render() {\n        const { name, balance, decimals, type } = this.props.balanceObj;\n        try {\n            let formattedBalance = formatFixed(balance.toString(), Math.max(parseInt(decimals.toString()), 1)).toString();\n            if(type === \"ERC721\" && formattedBalance.length > 19) {\n                formattedBalance = formattedBalance.substring(0, 19) + \"...\";\n            }\n            return (\n                <div>\n                    <div className=\"grid-container\">\n                        <div className=\"grid-items\">{name}</div>\n                        <div className=\"grid-items\">{formattedBalance}</div>\n                        <div className=\"grid-items\">{type}</div>\n                        <div className=\"grid-items\">\n                            <button className=\"btn btn-primary\" onClick={() => { this.setTransferClick(this.props.balanceObj) }}> Transfer</button>\n                            {this.state.l2MigrationButton}\n                            {this.state.swapButton}\n                        </div>\n                    </div>\n                </div>\n            )\n        } catch (e) {\n            return (<div/>)\n        }\n    }\n}\n\nexport default token;\n","import React, { Component } from 'react';\nimport Token from \"./token\";\n\nclass sweep extends Component {\n\n    constructor(props) {\n        super(props);\n        this.props = props;\n    }\n\n    render() {\n        const {account, to, provider, helpers} = this.props;\n        const tokens = this.props.balancesMapping.map((balanceObj) => {\n            return <Token balanceObj={balanceObj} account={account} to={to} provider={provider} helpers={helpers}/>\n        });\n\n        return (\n            <div>\n                <div id=\"results\">\n                    <div className=\"grid-container\">\n                        <div className=\"grid-item\">Coin</div>\n                        <div className=\"grid-item\">Balance</div>\n                        <div className=\"grid-item\">Type</div>\n                        <div className=\"grid-item\">Action</div>\n                    </div>\n                </div>\n                <div className=\"grid-container\">\n                    <div className=\"grid-items\">ETH</div>\n                    <div className=\"grid-items\">{this.props.balance / 1e18}</div>\n                    <div className=\"grid-items\">Ether</div>\n                    <div className=\"grid-items\">\n                        <button className=\"btn btn-primary\" id=\"sweepAllETH\" onClick={ () => { this.props.helpers.sendAllEth().then(console.log).catch(console.error) } }>Transfer</button>\n                        <button className=\"btn btn-danger\" id=\"migrateEthToL2\" onClick={ () => { this.props.helpers.migrateEthtoL2(this.props.balance).then(console.log).catch(console.error) } }>Migrate to L2</button>\n                    </div>\n                </div>\n                <div className=\"grid-container\">\n                    <div className=\"grid-items\">ALL</div>\n                    <div className=\"grid-items\">ALL</div>\n                    <div className=\"grid-items\">ALL</div>\n                    <div className=\"grid-items\">\n                        <button className=\"btn btn-danger\" id=\"sweepAllTokens\" onClick={ () => { this.props.helpers.sendAllTokens(this.props.balancesMapping).then(console.log).catch(console.error) } }>Sweep All Tokens</button>\n                    </div>\n                </div>\n                {tokens}\n            </div>\n        )\n    }\n}\n\nexport default sweep;\n","import React, { Component } from 'react';\nimport '../App.css';\nimport { ethers } from 'ethers';\nimport helpers from '../helpers/helpers';\nimport Sweep from './sweep';\nconst APIKeyString = \"&apikey=ANVBH7JCNH1BVHJ1NPB5FH1WKP5C6YSYJW\";\n\nclass main extends Component {\n\n    state = {\n        balance: undefined,\n        to: undefined,\n        account: undefined,\n        helpers: undefined,\n        balancesMapping: undefined\n    }\n\n    constructor(props) {\n        super(props);\n        this.setReadyClick = this.setReadyClick.bind(this);\n        this.load = this.load.bind(this);\n    }\n\n    async load() {\n        const accounts = await window.ethereum.enable();\n        const provider = new ethers.providers.Web3Provider(window.web3.currentProvider);\n        const balance = await provider.getBalance(accounts[0]);\n        this.setState({ balance: balance });\n        this.setState({ account: accounts[0] });\n        const helpers = new helpers(provider, accounts[0], APIKeyString, this.state.to, parseInt(window.ethereum.chainId));\n        this.setState({ helpers: helpers });\n        const balancesMapping = await helpers.getTokenBalances();\n        this.setState({ balancesMapping: balancesMapping });\n        document.getElementById(\"loading\").hidden = true;\n    }\n\n    setReadyClick() {\n        const to = document.getElementById(\"transferTo\").value;\n        const isAddress = ethers.utils.isAddress(to);\n        if(!isAddress) {\n            return alert(\"Invalid address provided, please try again\");\n        } else {\n            document.getElementById(\"loading\").hidden = false;\n            this.setState({ to: to });\n            this.load();\n        }\n    }\n\n    render() {\n        let sweepElement;\n        if(!!this.state.balancesMapping) {\n            sweepElement = <Sweep\n                balance={this.state.balance.toString()}\n                account={this.state.account}\n                helpers={this.state.helpers}\n                to={this.state.to}\n                balancesMapping={this.state.balancesMapping}\n            />\n        }\n        return (\n            <div>\n                <div className=\"jumbotron\">\n                    <div id=\"titles\">\n                        <h1>eth-sweep</h1>\n                    </div>\n                </div>\n                <div id=\"startBox\">\n                    <h5 id=\"description\">\n                        <i>This website allows you to easily sweep your ethereum wallet's funds to another address,\n                            transfer them to a Layer 2 wallet on <a href={\"https://zksync.io/\"}>ZkSync</a>  or sweep all the tokens into Ether via <a href={\"https://1inch.exchange/\"}>1inch</a>.</i>\n                    </h5>\n                    <br/>\n                    <input id=\"transferTo\" type=\"text\" placeholder=\"Paste the ethereum address you wish to transfer to\"/>\n                    <br/>\n                    <br/>\n                    <button className=\"btn btn-primary\" id=\"ready\" onClick={this.setReadyClick}> Begin </button>\n                    <h3 id=\"loading\" hidden>Loading, please wait...</h3>\n                </div>\n                <br/>\n                {sweepElement}\n            </div>\n        )\n    }\n}\n\nexport default main;\n","import Main from \"./components/main\";\nimport React from \"react\";\n\nfunction App() {\n    return (\n        <div>\n            <Main />\n        </div>\n    );\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport reportWebVitals from './reportWebVitals';\nimport 'bootstrap/dist/css/bootstrap.css';\nimport './App.css';\nimport App from \"./App.js\";\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n","module.exports = {\n    \"zksyncAddress\": \"0xaBEA9132b05A70803a4E85094fD0e1800777fBEF\",\n    \"OneInchAPIURL\": \"https://api.1inch.exchange/v3.0/1\",\n    \"nullAddress\": \"0x0000000000000000000000000000000000000000\",\n    \"ethAddress\": \"0xEeeeeEeeeEeEeeEeEeEeeEEEeeeeEeeeeeeeEEeE\",\n    \"unlimitedAllowance\": \"0xFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF\",\n    \"zksyncSupportedTokens\": [{\"id\":0,\"address\":\"0x0000000000000000000000000000000000000000\",\"symbol\":\"ETH\",\"decimals\":18},{\"id\":1,\"address\":\"0x6b175474e89094c44da98b954eedeac495271d0f\",\"symbol\":\"DAI\",\"decimals\":18},{\"id\":2,\"address\":\"0xa0b86991c6218b36c1d19d4a2e9eb0ce3606eb48\",\"symbol\":\"USDC\",\"decimals\":6},{\"id\":3,\"address\":\"0x0000000000085d4780b73119b644ae5ecd22b376\",\"symbol\":\"TUSD\",\"decimals\":18},{\"id\":4,\"address\":\"0xdac17f958d2ee523a2206206994597c13d831ec7\",\"symbol\":\"USDT\",\"decimals\":6},{\"id\":5,\"address\":\"0x57ab1ec28d129707052df4df418d58a2d46d5f51\",\"symbol\":\"SUSD\",\"decimals\":18},{\"id\":6,\"address\":\"0x4fabb145d64652a948d72533023f6e7a623c7c53\",\"symbol\":\"BUSD\",\"decimals\":18},{\"id\":7,\"address\":\"0x80fb784b7ed66730e8b1dbd9820afd29931aab03\",\"symbol\":\"LEND\",\"decimals\":18},{\"id\":8,\"address\":\"0x0d8775f648430679a709e98d2b0cb6250d2887ef\",\"symbol\":\"BAT\",\"decimals\":18},{\"id\":9,\"address\":\"0xdd974d5c2e2928dea5f71b9825b8b646686bd200\",\"symbol\":\"KNC\",\"decimals\":18},{\"id\":10,\"address\":\"0x514910771af9ca656af840dff83e8264ecf986ca\",\"symbol\":\"LINK\",\"decimals\":18},{\"id\":11,\"address\":\"0x0f5d2fb29fb7d3cfee444a200298f468908cc942\",\"symbol\":\"MANA\",\"decimals\":18},{\"id\":12,\"address\":\"0x9f8f72aa9304c8b593d555f12ef6589cc3a579a2\",\"symbol\":\"MKR\",\"decimals\":18},{\"id\":13,\"address\":\"0x1985365e9f78359a9b6ad760e32412f4a445e862\",\"symbol\":\"REP\",\"decimals\":18},{\"id\":14,\"address\":\"0xc011a73ee8576fb46f5e1c5751ca3b9fe0af2a6f\",\"symbol\":\"SNX\",\"decimals\":18},{\"id\":15,\"address\":\"0x2260fac5e5542a773aa44fbcfedf7c193bc2c599\",\"symbol\":\"WBTC\",\"decimals\":8},{\"id\":16,\"address\":\"0xe41d2489571d322189246dafa5ebde1f4699f498\",\"symbol\":\"ZRX\",\"decimals\":18},{\"id\":17,\"address\":\"0x65ece136b89ebaa72a7f7aa815674946e44ca3f9\",\"symbol\":\"MLTT\",\"decimals\":18},{\"id\":18,\"address\":\"0xbbbbca6a901c926f240b89eacb641d8aec7aeafd\",\"symbol\":\"LRC\",\"decimals\":18},{\"id\":19,\"address\":\"0x2b591e99afe9f32eaa6214f7b7629768c40eeb39\",\"symbol\":\"HEX\",\"decimals\":8},{\"id\":20,\"address\":\"0xd56dac73a4d6766464b38ec6d91eb45ce7457c44\",\"symbol\":\"PAN\",\"decimals\":18},{\"id\":21,\"address\":\"0x744d70fdbe2ba4cf95131626614a1763df805b9e\",\"symbol\":\"SNT\",\"decimals\":18},{\"id\":22,\"address\":\"0x0bc529c00c6401aef6d220be8c6ea1667f6ad93e\",\"symbol\":\"YFI\",\"decimals\":18},{\"id\":23,\"address\":\"0x1f9840a85d5af5bf1d1762f925bdaddc4201f984\",\"symbol\":\"UNI\",\"decimals\":18},{\"id\":24,\"address\":\"0xb64ef51c888972c908cfacf59b47c1afbc0ab8ac\",\"symbol\":\"STORJ\",\"decimals\":8},{\"id\":25,\"address\":\"0x8daebade922df735c38c80c7ebd708af50815faa\",\"symbol\":\"TBTC\",\"decimals\":18},{\"id\":26,\"address\":\"0xdb25f211ab05b1c97d595516f45794528a807ad8\",\"symbol\":\"EURS\",\"decimals\":2},{\"id\":27,\"address\":\"0x056fd409e1d7a124bd7017459dfea2f387b6d5cd\",\"symbol\":\"GUSD\",\"decimals\":2},{\"id\":28,\"address\":\"0xeb4c2781e4eba804ce9a9803c67d0893436bb27d\",\"symbol\":\"RENBTC\",\"decimals\":8},{\"id\":29,\"address\":\"0x6de037ef9ad2725eb40118bb1702ebb27e4aeb24\",\"symbol\":\"RNDR\",\"decimals\":18},{\"id\":30,\"address\":\"0x3108ccfd96816f9e663baa0e8c5951d229e8c6da\",\"symbol\":\"DARK\",\"decimals\":18},{\"id\":31,\"address\":\"0xaaaebe6fe48e54f431b0c390cfaf0b017d09d42d\",\"symbol\":\"CEL\",\"decimals\":18},{\"id\":32,\"address\":\"0x9ba00d6856a4edf4665bca2c2309936572473b7e\",\"symbol\":\"AUSDC\",\"decimals\":6},{\"id\":33,\"address\":\"0x38e4adb44ef08f22f5b5b76a8f0c2d0dcbe7dca1\",\"symbol\":\"CVP\",\"decimals\":18},{\"id\":34,\"address\":\"0x56d811088235f11c8920698a204a5010a788f4b3\",\"symbol\":\"BZRX\",\"decimals\":18},{\"id\":35,\"address\":\"0x408e41876cccdc0f92210600ef50372656052a38\",\"symbol\":\"REN\",\"decimals\":18},{\"id\":36,\"address\":\"0x38a2fdc11f526ddd5a607c1f251c065f40fbf2f7\",\"symbol\":\"PHNX\",\"decimals\":18},{\"id\":37,\"address\":\"0x7dd9c5cba05e151c895fde1cf355c9a1d5da6429\",\"symbol\":\"GLM\",\"decimals\":18},{\"id\":38,\"address\":\"0x4c7065bca76fe44afb0d16c2441b1e6e163354e2\",\"symbol\":\"3LY\",\"decimals\":18},{\"id\":39,\"address\":\"0x15a2b3cfafd696e1c783fe99eed168b78a3a371e\",\"symbol\":\"yvstETH\",\"decimals\":18},{\"id\":40,\"address\":\"0x0000000000095413afc295d19edeb1ad7b71c952\",\"symbol\":\"LON\",\"decimals\":18}]\n}\n","const { unlimitedAllowance, zksyncAddress, OneInchAPIURL, ethAddress } = require(\"./constants\");\nconst { ZKSYNC, ERC20, ERC721 } = require(\"./ABI.js\");\nconst { ethers } = require(\"ethers\");\nconst request = require('superagent');\n\nmodule.exports = class helpers {\n\n    constructor(provider, account, APIKeyString, to, chainId) {\n        this.provider = provider;\n        this.account = account;\n        this.APIKeyString = APIKeyString;\n        this.to = to;\n        this.chainId = chainId;\n    }\n\n    async sendAllEth() {\n        const userBalanceEth = await this.provider.getBalance(this.account);\n        const gasPrice = await this.provider.getGasPrice();\n        let txObj = {\n            to: this.to,\n            value: userBalanceEth\n        };\n        const gasLimit = await this.provider.estimateGas(txObj);\n        const totalCost = ethers.BigNumber.from(gasLimit).mul(ethers.BigNumber.from(gasPrice));\n        txObj.value = userBalanceEth.sub(totalCost);\n        await this.provider.getSigner().sendTransaction(txObj);\n    }\n\n    async sendAllTokens(balancesMapping) {\n        for(const balanceObj of balancesMapping) {\n            const contract = new ethers.Contract(balanceObj.address, ERC20).connect(this.provider.getSigner());\n            contract.transfer(this.to, balanceObj.balance)\n                .then(console.log)\n                .catch(console.error);\n        }\n    }\n\n    async transferToken(balanceObj) {\n        try {\n            const contract = new ethers.Contract(balanceObj.address, ERC20).connect(this.provider.getSigner());\n            return contract.transfer(this.to, balanceObj.balance);\n        } catch (e) {\n            return e;\n        }\n    }\n\n    async tradeToEthWith1Inch(balanceObj) {\n        const { tx, approvalAddress } = await this.get1InchTradeData(balanceObj);\n        if(approvalAddress) {\n            const tokenContract = new ethers.Contract(balanceObj.address, ERC20).connect(this.provider.getSigner());\n            await tokenContract.approve(approvalAddress, unlimitedAllowance);\n            // now that we are approved, try again\n            await this.tradeToEthWith1Inch(balanceObj);\n        } else {\n            return this.provider.sendTransaction(tx);\n        }\n    }\n\n    async get1InchTradeData(balanceObj) {\n        try {\n            const query = `${OneInchAPIURL}/swap?fromTokenAddress=${balanceObj.address}&toTokenAddress=${ethAddress}&amount=${balanceObj.balance.toString()}&fromAddress=${this.account}&slippage=${5}`;\n            const response = await request.get(query);\n            const tx = response.body.tx;\n            const DEXAddress = tx.to;\n            return {\n                response: response,\n                tx: tx,\n                DEXAddress: DEXAddress\n            }\n        } catch(e) {\n            console.error(e);\n            const message = JSON.parse(e.response.text).message;\n            if(message.includes(\"Not enough allowance\")) {\n                return {\n                    approvalAddress: message.substring(message.length - 42)\n                }\n            }\n        }\n\n    }\n\n    async getQuoteInEth1Inch(balanceObj) {\n        try {\n            const query = `${OneInchAPIURL}/quote?fromTokenAddress=${balanceObj.address}&toTokenAddress=${ethAddress}&amount=${balanceObj.balance.toString()}`;\n            const result = await request.get(query);\n            return result.body.toTokenAmount / 1e18;\n        } catch (e) {\n            console.error(e);\n        }\n    }\n\n    async migrateEthtoL2(balance) {\n        const zksyncContract = new ethers.Contract(zksyncAddress, ZKSYNC).connect(this.provider.getSigner());\n        await zksyncContract.depositETH(this.to, { value: balance });\n    }\n\n    async migrateToZksync(balanceObj) {\n        const contract = new ethers.Contract(balanceObj.address, ERC20).connect(this.provider.getSigner());\n        const allowance = await contract.allowance(this.account, zksyncAddress);\n        if(allowance._hex === \"0x00\") {\n            await contract.approve(zksyncAddress, unlimitedAllowance);\n        }\n        const zksyncContract = new ethers.Contract(zksyncAddress, ZKSYNC).connect(this.provider.getSigner());\n        await zksyncContract.depositERC20(balanceObj.address, balanceObj.amount, zksyncAddress);\n    }\n\n    async getTokenBalances() {\n        const erc20TokensObj = await this.getERC20Tokens();\n        const erc721TokensObj = await this.getERC721Tokens();\n        const erc20Balances = await this.getAllERC20Balances(erc20TokensObj);\n        const erc721Balances = await this.getAllERC721Balances(erc721TokensObj);\n\n        return [...erc20Balances, ...erc721Balances];\n    }\n\n    uniq(a) {\n        let seen = {};\n        return a.filter(function(item) {\n            return seen.hasOwnProperty(item) ? false : (seen[item] = true);\n        });\n    }\n\n    async getAllERC721Balances(tokensObj) {\n        let erc721Balances = [];\n        let contracts = this.uniq(tokensObj.contractAddresses);\n        let names = this.uniq(tokensObj.tokenNames);\n        for(let index in contracts) {\n            for(let tokenId of tokensObj.tokenIds[contracts[index]]) {\n                let stillOwned = await this.getStillOwnedERC721(tokenId, contracts[index]);\n                if(stillOwned) {\n                    let balanceObj = {};\n                    balanceObj.address = contracts[index];\n                    balanceObj.type = \"ERC721\";\n                    balanceObj.balance = tokenId;\n                    balanceObj.decimals = 0;\n                    balanceObj.name = names[index];\n                    erc721Balances.push(balanceObj);\n                }\n            }\n        }\n        return erc721Balances;\n    }\n\n    async getAllERC20Balances(erc20Contracts) {\n        let erc20Balances = [];\n        for(const index in erc20Contracts.contractAddresses) {\n            let contractAddress = erc20Contracts.contractAddresses[index];\n            //TODO too slow, get balances by batch\n            let balance = await this.getERC20Balance(contractAddress);\n            let balanceObj = {};\n            balanceObj.decimals = erc20Contracts.decimals[index];\n            balanceObj.address = contractAddress;\n            balanceObj.balance = balance;\n            balanceObj.type = \"ERC20\";\n            balanceObj.name = erc20Contracts.tokenNames[index];\n            if(balance.toString() !== \"0\") {\n                erc20Balances.push(balanceObj);\n            }\n        }\n        return erc20Balances;\n    }\n\n    async getStillOwnedERC721(tokenId, contractAddress) {\n        try {\n            const contract = new ethers.Contract(contractAddress, ERC721).connect(this.provider);\n            let owner = await contract.ownerOf(tokenId);\n            return owner.toLowerCase() === this.account.toLowerCase();\n        } catch(e) {\n            console.error(e);\n        }\n    }\n\n    async getERC20Balance(contractAddress) {\n        try {\n            const contract = new ethers.Contract(contractAddress, ERC20).connect(this.provider);\n            return await contract.balanceOf(this.account);\n        } catch(e) {\n            console.error(e);\n        }\n    }\n\n    async getERC20Tokens() {\n        let erc20Query = this.getQueryERC20Events(this.chainId, this.account);\n        try {\n            let tokensObj = {};\n            let tokens = [];\n            let tokenNames = [];\n            let tokenDecimals = [];\n            let call = await request.get(erc20Query);\n            let results = call.body.result;\n            for(let result of results) {\n                if(!tokens.includes(result.contractAddress)) {\n                    tokens.push(result.contractAddress);\n                    tokenNames.push(result.tokenName);\n                    tokenDecimals.push(result.tokenDecimal);\n                }\n            }\n            tokensObj.tokenNames = tokenNames;\n            tokensObj.contractAddresses = tokens;\n            tokensObj.decimals = tokenDecimals;\n            return tokensObj;\n        } catch(e) {\n            console.error(e);\n        }\n    }\n\n    async getERC721Tokens() {\n        let erc721Query = this.getQueryERC721Events(this.chainId, this.account);\n        try {\n            let tokensObj = {};\n            let tokens = [];\n            let tokenNames = [];\n            let tokenDecimals = [];\n            let tokenIds = {}; // NB: this must be checked to see if still owned\n            let call = await request.get(erc721Query);\n            let results = call.body.result;\n            for(let result of results) {\n                tokens.push(result.contractAddress);\n                tokenNames.push(result.tokenName);\n                tokenDecimals.push(result.tokenDecimal);\n                if (tokenIds[result.contractAddress] === undefined) {\n                    tokenIds[result.contractAddress] = [];\n                }\n                if(!tokenIds[result.contractAddress].includes(result.tokenID)) {\n                    tokenIds[result.contractAddress].push(result.tokenID);\n                }\n            }\n            tokensObj.tokenNames = tokenNames;\n            tokensObj.contractAddresses = tokens;\n            tokensObj.decimals = tokenDecimals;\n            tokensObj.tokenIds = tokenIds;\n            return tokensObj;\n        } catch(e) {\n            console.error(e);\n        }\n    }\n\n    getQueryERC20Events(chainId) {\n        switch (chainId) {\n            case 1:\n                return \"https://api.etherscan.io/api?module=account&action=tokentx&address=\" + this.account + this.APIKeyString;\n            case 3:\n                return \"https://ropsten.etherscan.io/api?module=account&action=tokentx&address=\" + this.account + this.APIKeyString;\n            case 4:\n                return \"https://rinkeby.etherscan.io/api?module=account&action=tokentx&address=\" + this.account + this.APIKeyString;\n            case 42:\n                return \"https://kovan.etherscan.io/api?module=account&action=tokentx&address=\" + this.account + this.APIKeyString;\n            default:\n                return \"https://api.etherscan.io/api?module=account&action=tokentx&address=\" + this.account + this.APIKeyString;\n        }\n    }\n\n    getQueryERC721Events(chainId) {\n        switch (chainId) {\n            case 1:\n                return \"https://api.etherscan.io/api?module=account&action=tokennfttx&address=\" + this.account + this.APIKeyString;\n            case 3:\n                return \"https://ropsten.etherscan.io/api?module=account&action=tokennfttx&address=\" + this.account + this.APIKeyString;\n            case 4:\n                return \"https://rinkeby.etherscan.io/api?module=account&action=tokennfttx&address=\" + this.account + this.APIKeyString;\n            case 42:\n                return \"https://kovan.etherscan.io/api?module=account&action=tokennfttx&address=\" + this.account + this.APIKeyString;\n            default:\n                return \"https://api.etherscan.io/api?module=account&action=tokennfttx&address=\" + this.account + this.APIKeyString;\n        }\n    }\n}\n","module.exports = {\n    ERC20: [\n        \"function balanceOf(address owner) view returns (uint256)\",\n        \"function transfer(address to, uint amount) returns (bool)\",\n        \"function allowance(address spender, address owner) view returns(uint256)\",\n        \"function approve(address spender, uint amount) returns (bool)\"\n    ],\n\n    ERC721: [\n        \"function ownerOf(uint256 _tokenId) external view returns (address)\"\n    ],\n\n    ZKSYNC: [\n        \"function depositERC20(address _token, uint104 _amount, address _zkSyncAddress)\",\n        \"function depositETH(address _franklinAddr)\"\n    ]\n};\n"],"sourceRoot":""}